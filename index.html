<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="description" content="明天扁的个人网站" />
  <meta name="keywords" content="明天扁,mingtianbian,明天扁网站" />
  <title>明天扁</title>
  <link rel="icon" href="assets/images/thanks_zsd.png" type="image/png" />

<script>
    (function() {
      const colorPairs = [
        { light: ["#f6d365", "#fda085"], dark: ["#a0522d", "#3e2723"] }, 
        { light: ["#a1c4fd", "#c2e9fb"], dark: ["#1a237e", "#01579b"] }, 
        { light: ["#84fab0", "#8fd3f4"], dark: ["#1b5e20", "#006064"] }, 
        { light: ["#e0c3fc", "#8ec5fc"], dark: ["#4a148c", "#1a237e"] }, 
        { light: ["#ff9a9e", "#fecfef"], dark: ["#880e4f", "#4a148c"] }, 
        { light: ["#cfd9df", "#e2ebf0"], dark: ["#263238", "#37474f"] }, 
        { light: ["#fa709a", "#fee140"], dark: ["#bf360c", "#3e2723"] }, 
        { light: ["#667eea", "#764ba2"], dark: ["#283593", "#4527a0"] }, 
        { light: ["#4facfe", "#00f2fe"], dark: ["#0d47a1", "#006064"] }, 
        { light: ["#d4fc79", "#96e6a1"], dark: ["#33691e", "#1b5e20"] }  
      ];

      let pIdx = sessionStorage.getItem('mtb_pair_index');
      if (pIdx === null) {
        pIdx = Math.floor(Math.random() * colorPairs.length);
        sessionStorage.setItem('mtb_pair_index', pIdx);
      }
      const pair = colorPairs[parseInt(pIdx)];

      function injectTheme() {
        const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const c = isDark ? pair.dark : pair.light;
        const styleId = 'theme-preloader';
        let styleTag = document.getElementById(styleId);
        if (!styleTag) {
          styleTag = document.createElement('style');
          styleTag.id = styleId;
          document.head.appendChild(styleTag);
        }
        styleTag.innerHTML = `:root { --bg-a: ${c[0]}; --bg-b: ${c[1]}; }`;
      }

      injectTheme();
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', injectTheme);
    })();
  </script>

  <style>
    :root {
      --text: #333; --card: rgba(255, 255, 255, 0.15); --border: rgba(255, 255, 255, 0.25);
      --brand-bili: #00A1D6; --brand-git: #333; --radius: 24px;
      /* 浅色模式图标路径 */
      --git-icon: url("assets/images/github-mark.svg");
    }
    
    @media (prefers-color-scheme: dark) {
      :root { 
        --text: #f3f4f6; --brand-git: #eee; --card: rgba(0, 0, 0, 0.25); --border: rgba(255, 255, 255, 0.1);
        /* 深色模式图标路径切换为白色版 */
        --git-icon: url("assets/images/github-mark-white.svg");
      }
        /* 深色模式下的特殊悬停：填充 GitHub 灰 (#444) */
      .github:hover { 
        background: #444 !important; 
        color: #fff !important; 
        border-color: #555 !important;
      }
      .github:hover img { content: url("assets/images/github-mark.svg") !important; }
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      color: var(--text);
      display: flex; align-items: center; justify-content: center;
      min-height: 100svh; margin: 0; overflow: hidden;
      background: linear-gradient(135deg, var(--bg-a), var(--bg-b));
      transition: background 0.6s ease;
    }

    .container {
      position: relative; width: 100%; max-width: 480px;
      margin: 20px; padding: 40px 30px;
      background: var(--card); border: 1px solid var(--border);
      border-radius: var(--radius); text-align: center; z-index: 10;
      box-shadow: 0 20px 50px rgba(0,0,0,0.12);
      backdrop-filter: blur(20px) saturate(160%);
      -webkit-backdrop-filter: blur(20px) saturate(160%);
    }

    h1 { margin: 0 0 10px; font-size: 32px; letter-spacing: -1px; }
    p { opacity: 0.8; line-height: 1.6; margin: 5px 0 20px; }

    .link-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
    .link-container a {
      display: flex; align-items: center; justify-content: center; gap: 8px;
      text-decoration: none; font-weight: 600; padding: 14px; border-radius: 50px;
      border: 1.5px solid currentColor; transition: all 0.3s ease; color: inherit;
    }

    .bilibili { color: var(--brand-bili); background: rgba(0,161,214,0.05); }
    .bilibili:hover { background: var(--brand-bili); color: #fff; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,161,214,0.3); }
    
    .github { color: var(--brand-git); background: rgba(0,0,0,0.05); }
    .github:hover { background: #333; color: #fff; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }

    /* 让 GitHub 图标根据 CSS 变量显示 */
    .github img { content: var(--git-icon); }

    .link-container img { width: 20px; height: 20px; transition: filter 0.3s; }
    .bilibili:hover img { filter: brightness(0) invert(1); }
    
    /* 深色模式下悬停 GitHub 按钮变白底黑字 */
    @media (prefers-color-scheme: dark) {
      .github:hover { color: #000 !important; background: #fff !important; }
    }
    /* 浅色模式下悬停 GitHub 图标变白 */
    @media (prefers-color-scheme: light) { 
      .github:hover img { filter: brightness(0) invert(1); } 
    }
    @media (max-width: 480px) { .link-container { grid-template-columns: 1fr; } }
  </style>
</head>
<body>

  <main class="container" id="mainCard">
    <h1>明天扁</h1>
    <p>欢迎来到我的个人主页</p>
    <nav class="link-container">
      <a class="bilibili" href="https://space.bilibili.com/135667864" target="_blank">
        <img src="assets/images/Bilibili_logo.svg" alt="Bili" />
        <span>哔哩哔哩</span>
      </a>
      <a class="github" href="https://github.com/mingtianbian" target="_blank">
        <img src="assets/images/github-mark.svg" alt="Git" />
        <span>GitHub</span>
      </a>
    </nav>
  </main>

  <script>
    (function() {
      const container = document.getElementById('mainCard');
      const buttons = container.querySelectorAll('a');
      const svgNS = "http://www.w3.org/2000/svg";
      const svg = document.createElementNS(svgNS, "svg");
      svg.style.cssText = "position:fixed; opacity:0; pointer-events:none;";
      svg.innerHTML = `
        <defs>
          <filter id="liquid-filter" filterUnits="userSpaceOnUse">
            <feImage id="fe-map" result="map" />
            <feDisplacementMap in="SourceGraphic" in2="map" scale="65" xChannelSelector="R" yChannelSelector="G" />
          </filter>
        </defs>`;
      document.body.appendChild(svg);

      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      const dpi = window.devicePixelRatio || 1;
      let lens = { x: -1000, y: -1000, w: 150, h: 150 };
      let mouse = { x: -1000, y: -1000 };

      function syncSize() {
        const rect = container.getBoundingClientRect();
        canvas.width = rect.width * dpi;
        canvas.height = rect.height * dpi;
        const filter = document.getElementById('liquid-filter');
        filter.setAttribute('x', rect.left);
        filter.setAttribute('y', rect.top);
        filter.setAttribute('width', rect.width);
        filter.setAttribute('height', rect.height);
      }

      window.addEventListener('mousemove', (e) => {
        const rect = container.getBoundingClientRect();
        mouse.x = e.clientX - rect.left;
        mouse.y = e.clientY - rect.top;
      });

      function loop() {
        const rect = container.getBoundingClientRect();
        let snapping = false;

        buttons.forEach(btn => {
          const b = btn.getBoundingClientRect();
          const bX = (b.left + b.width/2) - rect.left;
          const bY = (b.top + b.height/2) - rect.top;
          if (Math.hypot(mouse.x - bX, mouse.y - bY) < 110) {
            lens.x += (bX - lens.x) * 0.18;
            lens.y += (bY - lens.y) * 0.18;
            lens.w += (b.width + 35 - lens.w) * 0.18;
            lens.h += (b.height + 35 - lens.h) * 0.18;
            snapping = true;
          }
        });

        if (!snapping) {
          lens.x += (mouse.x - lens.x) * 0.12;
          lens.y += (mouse.y - lens.y) * 0.12;
          lens.w += (150 - lens.w) * 0.12;
          lens.h += (150 - lens.h) * 0.12;
        }

        ctx.fillStyle = 'rgb(127,127,0)'; 
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        const grad = ctx.createRadialGradient(
          lens.x * dpi, lens.y * dpi, 0,
          lens.x * dpi, lens.y * dpi, Math.max(lens.w, lens.h) * dpi / 1.4
        );
        grad.addColorStop(0, 'rgb(255,255,0)'); 
        grad.addColorStop(1, 'rgb(127,127,0)');

        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.ellipse(lens.x * dpi, lens.y * dpi, lens.w*dpi/2, lens.h*dpi/2, 0, 0, Math.PI*2);
        ctx.fill();

        const feImage = document.getElementById('fe-map');
        if (feImage) {
          feImage.setAttributeNS('http://www.w3.org/1999/xlink', 'href', canvas.toDataURL('image/png', 0.6));
        }
        requestAnimationFrame(loop);
      }

      container.style.backdropFilter = "url(#liquid-filter) blur(20px) saturate(160%)";
      syncSize(); 
      loop();
      window.addEventListener('resize', syncSize);
    })();
  </script>
</body>
</html>